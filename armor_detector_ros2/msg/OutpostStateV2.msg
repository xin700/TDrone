# OutpostStateV2.msg
# 前哨站状态预测结果 V2 (多假设追踪版本)
# 支持未收敛阶段的多假设可视化

# 消息头（包含时间戳和坐标系）
std_msgs/Header header

# ==============================================================================
# 收敛状态
# ==============================================================================
# 是否已收敛到单一假设
bool converged

# 最佳假设ID (0=HIGH, 1=MIDDLE, 2=LOW)，仅在收敛后有效
int32 best_hypothesis_id

# 三个假设的置信度 [high_conf, middle_conf, low_conf]
float64[3] hypothesis_confidences

# 每个假设的更新次数
int32[3] hypothesis_update_counts

# ==============================================================================
# 旋转中心状态（最佳假设或加权平均）
# ==============================================================================
# 旋转中心位置（米）
geometry_msgs/Point center

# 当前旋转角度（弧度）
float64 theta

# 角速度（弧度/秒）
float64 omega

# 旋转方向: -1 = 顺时针, 1 = 逆时针, 0 = 未知
int32 direction

# ==============================================================================
# 三个装甲板当前位置（用于可视化）
# ==============================================================================
# armor_positions[0] = 高位装甲板 (z_center + height_diff)
# armor_positions[1] = 中位装甲板 (z_center)
# armor_positions[2] = 低位装甲板 (z_center - height_diff)
geometry_msgs/Point[3] armor_positions

# 每个装甲板是否可打（朝向角度 < max_orientation_angle）
bool[3] armor_shootable

# 每个装甲板的朝向角度（弧度）
float64[3] armor_orientations

# ==============================================================================
# 弹道预测结果
# ==============================================================================
# 预测的击中点位置（考虑延迟和弹道飞行时间后）
geometry_msgs/Point predicted_hit_point

# 子弹飞行时间（秒）
float64 bullet_flight_time

# 预测时刻三个装甲板的位置
geometry_msgs/Point[3] predicted_armor_positions

# 预测击中的装甲板ID (0, 1, 2)，-1表示无可打目标
int32 predicted_target_id

# 下一个可打窗口到来时间（秒），-1表示当前已可打
float64 next_window_time

# ==============================================================================
# 几何参数（供可视化使用）
# ==============================================================================
# 旋转半径（米）
float64 radius

# 装甲板高度差（米）
float64 height_diff

# ==============================================================================
# 状态有效性
# ==============================================================================
# 估计是否有效
bool valid

# 上次观测时间距离现在的时间差（秒）
float64 time_since_last_observation
